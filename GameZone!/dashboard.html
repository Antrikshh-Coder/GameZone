<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Organizer Dashboard — GameZone</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
:root {
    --bg-1: #05060a;
    --neon-cyan: #00f0ff;
    --neon-purple: #b23cff;
    --muted: #9aa0b2;
}
body {
    margin: 0;
    padding: 0;
    font-family: 'Poppins', sans-serif;
    background: var(--bg-1);
    color: white;
}
.dashboard-container {
    padding: 20px;
}
.card {
    background: rgba(0,0,0,0.85);
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 20px;
    box-shadow: 0 0 20px rgba(178,60,255,0.6);
}
.card h2 {
    margin-top: 0;
    color: var(--neon-cyan);
}
.player-card {
    background: rgba(255,255,255,0.05);
    padding: 10px;
    border-radius: 8px;
    margin-bottom: 8px;
}

/* Back button style */
.back-button {
    display: inline-block;
    padding: 10px 20px;
    margin-bottom: 20px;
    background: var(--neon-purple);
    color: white;
    font-weight: 600;
    border-radius: 8px;
    cursor: pointer;
    text-decoration: none;
    transition: background 0.3s ease;
}
.back-button:hover {
    background: var(--neon-cyan);
}
</style>
</head>
<body>

<div class="dashboard-container">
    <!-- Back Button -->
    <a class="back-button" onclick="history.back()">← Back</a>

    <!-- Registered Players -->
    <div class="card">
        <h2>Registered Players</h2>
        <div id="registered-players">Loading players...</div>
    </div>
</div>

<script type="module">
import { db } from './firebase.js';
import { collection, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";

const playersContainer = document.getElementById("registered-players");

const registrationsCol = collection(db, "event_registrations");
const registrationsQuery = query(registrationsCol, orderBy("createdAt", "desc"));

onSnapshot(registrationsQuery, (snapshot) => {
    playersContainer.innerHTML = "";
    if (snapshot.empty) {
        playersContainer.innerHTML = "<div>No players registered yet.</div>";
        return;
    }
    snapshot.forEach(doc => {
        const data = doc.data();
        const playerCard = document.createElement("div");
        playerCard.className = "player-card";
        playerCard.innerHTML = `
            <strong>Name:</strong> ${data.name} <br>
            <strong>Email:</strong> ${data.email} <br>
            <strong>Game:</strong> ${data.game} <br>
            <strong>Team:</strong> ${data.teamName} <br>
            <small>${data.notes || ""}</small>
        `;
        playersContainer.appendChild(playerCard);
    });
});
</script>

</body>
</html>
